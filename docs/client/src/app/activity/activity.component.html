<div class="p-8 max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-8 flex items-center justify-between">
        <div>
            <h1 class="text-3xl font-display font-bold text-text mb-2">Activity Log</h1>
            <p class="text-text-muted">Track workflow runs and generated reports</p>
        </div>
        <!-- Filter (Visual only for now) -->
        <div class="flex items-center gap-2">
            <span class="text-sm text-text-muted">Filter by:</span>
            <select
                class="bg-surface border border-border text-sm rounded-lg p-2 focus:ring-primary focus:border-primary">
                <option>All Activity</option>
                <option>My Runs</option>
                <option>Completed</option>
            </select>
        </div>
    </div>

    <!-- Activity List -->
    <div class="space-y-4">
        @for (activity of activities; track activity.id) {
        <div
            class="bg-surface rounded-xl border border-border p-4 hover:border-primary/30 transition-colors flex items-center justify-between group">

            <!-- Left: Status Icon & Info -->
            <div class="flex items-center min-w-0 gap-4">
                <!-- Status Icon Circle -->
                <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0" [ngClass]="{
                 'bg-green-100 text-green-600': activity.status === 'completed',
                 'bg-orange-100 text-orange-600': activity.status === 'processing',
                 'bg-red-100 text-red-600': activity.status === 'failed'
               }">
                    <span class="font-bold text-lg" [class.animate-pulse]="activity.status === 'processing'">{{
                        getStatusIcon(activity.status) }}</span>
                </div>

                <!-- Text Info -->
                <div>
                    <h3 class="text-base font-semibold text-text">{{ activity.workflowName }}</h3>
                    <div class="flex items-center gap-3 text-sm text-text-muted">
                        <span>{{ activity.date }}</span>
                        <span>•</span>
                        <span>Duration: {{ activity.duration }}</span>
                        <span>•</span>
                        <span class="flex items-center gap-1">
                            <span
                                class="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-[10px] text-gray-600 font-bold">
                                {{ activity.user.charAt(0).toUpperCase() }}
                            </span>
                            {{ activity.user }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Right: Actions -->
            <div class="flex items-center gap-4">
                <!-- Status Badge -->
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                    [ngClass]="getStatusClass(activity.status)">
                    {{ getStatusLabel(activity.status) }}
                </span>

                <!-- View Report Button (Only if completed) -->
                @if (activity.status === 'completed') {
                <a [routerLink]="['/reports', activity.id]"
                    class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-primary bg-primary/10 hover:bg-primary/20 transition-colors">
                    View Report
                </a>
                } @else if (activity.status === 'processing') {
                <span class="text-sm text-text-muted italic px-4"> analyzing...</span>
                } @else {
                <button class="text-sm text-text-muted hover:text-text px-4 underline">Retry</button>
                }
            </div>
        </div>
        }
    </div>
</div>